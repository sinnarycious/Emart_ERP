<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="oe">

	<resultMap type="oe" id="oeMap">
		<result column="OE_NO" property="oeNo" />
		<result column="OE_COUNT" property="oeCount" />
		<result column="OE_PRICE_E" property="oePrice" />
		<result column="ORDER_DATE" property="orderDate" />
		<result column="ENTER_DATE" property="enterDate" />
		<result column="OE_STATUS" property="oeStatus" />
		<result column="OE_INV_NO" property="oeInvNo" />
		<result column="OE_NAME" property="oeName" />
		<result column="OE_CAT_NO" property="oeCatNo" />
	</resultMap>
	
	<select id="selectOEList" resultMap="oeMap">
		SELECT * FROM ORDER_ENTER
		ORDER BY OE_NO DESC
	</select>
	
	<select id="selectOETotalContents" resultType="_int">
		SELECT COUNT(*) FROM ORDER_ENTER
	</select>

	<!-- 검색 기능 -->
	<select id="searchInfo" parameterType="oe" resultMap="oeMap">
		SELECT * FROM ORDER_ENTER
		<where>
			<if test="oeName !=null">
				AND OE_NAME LIKE '%' || #{ oeName } || '%'
			</if>
			<if test="oeNo != 0">
				AND OE_NO = #{ oeNo }
			</if>
			<if test="orderDate1 !=null and orderDate2 =null">
				AND ORDER_DATE = #{ orderDate1 }
			</if>
			<if test="orderDate1 !=null and orderDate2 != null">
				AND ORDER_DATE BETWEEN #{ orderDate1 } AND #{ orderDate2 }
			</if>
		</where>
	</select>

	<update id="updateStatus" parameterType="oe">
		UPDATE ORDER_ENTER
		SET OE_STATUS = 'Y', ENTER_DATE = SYSDATE
		WHERE OE_NO = #{ oeNo } AND OE_NAME = #{ oeName }
	</update>

	<delete id="resetList" parameterType="string">
		DELETE FROM OE WEHRE 
		WEHRE 
	</delete>
	
	<select  id="orderList" resultMap="oeMap">
		SELECT * FROM ORDER_ENTER
		WHERE OE_NO = #{oeNo}
	</select>
	
	<insert id="">
		INSERT INTO ORDER_ENTER VALUES(#{oeNo}, #{oeCount}, #{oePrice}, 
			#{orderDate}, #{enterDate}, #{oeStatus}, #{oeInvNo}, 
			#{oeName}, #{oeCatNo}, #{})
	</insert>

</mapper>